# 백엔드/프론트엔드 API 매핑 분석

**분석일**: 2026-01-03  
**기반 문서**: `docs/03_easyK_UserFlow.md`

---

## 개요

이 문서는 UserFlow에 정의된 사용자 흐름과 백엔드 API, 프론트엔드 구현 간의 매핑 상황을 상세히 분석합니다.

---

## 1. 법률 상담 흐름 (FEAT-1)

### 1.1 백엔드 API 구현 현황

| 기능 | API 엔드포인트 | 구현 여부 | 비고 |
|------|-----------------|-----------|------|
| 상담 생성 | POST `/api/consultations` | ✅ 구현됨 | 사용자 상담 생성 |
| 상담 목록 조회 | GET `/api/consultations` | ✅ 구현됨 | 상태 필터 지원 |
| 상담 상세 조회 | GET `/api/consultations` (전체 조회 후 필터링) | ⚠️ 부분 | 개별 상세 엔드포인트 없음 |
| 전문가 진입 목록 | GET `/api/consultants/incoming` | ✅ 구현됨 | 전문가 전용 |
| 전문가 수락 | POST `/api/consultants/incoming/{id}/accept` | ✅ 구현됨 | |
| 전문가 거절 | POST `/api/consultants/incoming/{id}/reject` | ✅ 구현됨 | |
| 전문가 후기 목록 | GET `/api/consultants/{id}/reviews` | ✅ 구현됨 | |
| 결제 생성 | POST `/api/payments` | ✅ 구현됨 | 토스페이먼츠 |
| 결제 콜백 | POST `/api/payments/callback` | ✅ 구현됨 | 토스 웹훅 |

**백엔드 API 완성도**: **약 95%**

### 1.2 프론트엔드 구현 현황

| 페이지 | 경로 | 구현 여부 | 백엔드 API 연동 | 비고 |
|------|------|-----------|-------------|------|
| 상담 신청 | `/consultations/new` | ✅ 구현됨 | POST `/api/consultations` | |
| 상담 목록 | `/consultations` | ✅ 구현됨 | GET `/api/consultations` | |
| 상담 상세 | `/consultations/[id]` | ✅ 구현됨 | GET `/api/consultations` (전체 조회 후 필터링) | API 개별 조회 필요 |
| 결제 페이지 | `/consultations/[id]/payment` | ✅ 구현됨 | POST `/api/payments` | |
| 결제 성공 | `/consultations/[id]/payment/success` | ✅ 구현됨 | 토스 콜백 후 상태 업데이트 필요 |
| 결제 실패 | `/consultations/[id]/payment/fail` | ✅ 구현됨 | 토스 콜백 후 상태 업데이트 필요 |
| 후기 작성 | `/consultations/[id]/review` | ✅ 구현됨 | POST `/api/reviews` | |
| 전문가 대시보드 | `/consultants` | ✅ 구현됨 | GET `/api/consultants/incoming` | 전문가 전용 API와 연동 필요 |
| 전문가 수락/거절 UI | `/consultants` 내부 탭 | ✅ 구현됨 | POST `/api/consultants/incoming/{id}/accept` | |

**프론트엔드 완성도**: **약 85%**

### 1.3 매핑 문제점

1. **상담 상세 페이지** (`/consultations/[id]`)
   - **문제**: 프론트엔드에서 전체 상담 목록을 조회한 후 클라이언트 사이드에서 필터링하여 상세를 표시
   - **개선 필요**: 백엔드에 개별 상담 상세 조회 API 추가 권장
   - **현재 해결방식**: 프론트엔드에서 전체 목록 조회 후 필터링 처리 (데이터 효율성 문제 있을 수 있음)

2. **결제 성공/실페이지**
   - **문제**: 토스 콜백 후 상담 상태를 업데이트하는 로직이 누락
   - **개선 필요**: 콜백 핸들러에서 상담 상태 업데이트 구현

---

## 2. 일자리 찾기 흐름 (FEAT-2)

### 2.1 백엔드 API 구현 현황

| 기능 | API 엔드포인트 | 구현 여부 | 비고 |
|------|-----------------|-----------|------|
| 일자리 목록 조회 | GET `/api/jobs` | ✅ 구현됨 | 지역, 형태, 키워드 필터 지원 |
| 일자리 상세 조회 | GET `/api/jobs/{job_id}` | ✅ 구현됨 | 지원 여부(has_applied) 포함 |
| 일자리 지원서 제출 | POST `/api/jobs/{job_id}/apply` | ✅ 구현됨 | 이력서, 자기소개서 |
| 일자리 삭제 | DELETE `/api/jobs/{job_id}` | ✅ 구현됨 | 관리자 전용 |
| 일자리 수정 | PUT `/api/jobs/{job_id}` | ✅ 구현됨 | 관리자 전용 |
| 일자리 생성 | POST `/api/jobs` | ✅ 구현됨 | 관리자 전용 |
| 일자리 지원자 목록 | GET `/api/jobs/{job_id}/applications` | ✅ 구현됨 | 지원 내역 포함 |
| 지원 상태 업데이트 | PUT `/api/jobs/applications/{id}` | ✅ 구현됨 | 채용/거절/면접 대기 |

**백엔드 API 완성도**: **약 90%**

### 2.2 프론트엔드 구현 현황

| 페이지 | 경로 | 구현 여부 | 백엔드 API 연동 | 비고 |
|------|------|-----------|-------------|------|
| 일자리 목록 | `/jobs` | ✅ 구현됨 | GET `/api/jobs` | 샘플 데이터 데모 포함 |
| 일자리 상세 | `/jobs/[id]` | ✅ 구현됨 | GET `/api/jobs/{job_id}` | 지원 여부 표시 |
| 지원서 작성 | `/jobs/[id]/apply` | ✅ 구현됨 | POST `/api/jobs/{job_id}/apply` | ✅ 매핑 완료 |
| 관리자 대시보드 | `/admin/jobs` | ✅ 구현됨 | GET `/api/jobs` (관리자) | ✅ 매핑 완료 |
| 공고 등록 | `/admin/jobs` 내부 모달 | ✅ 구현됨 | POST `/api/jobs` | ✅ 매핑 완료 |
| 공고 수정 | `/admin/jobs` 내부 모달 | ✅ 구현됨 | PUT `/api/jobs/{job_id}` | ✅ 매핑 완료 |
| 공고 삭제 | `/admin/jobs` 내부 버튼 | ✅ 구현됨 | DELETE `/api/jobs/{job_id}` | ✅ 매핑 완료 |
| 지원자 목록 | `/admin/jobs` 내부 표시 | ✅ 구현됨 | GET `/api/jobs/{job_id}/applications` | ✅ 매핑 완료 |
| 지원자 상세 | 표시 | ✅ 구현됨 | 프로필, 이력서, 자기소개서 |
| 상태 변경 | 면접/채용/거절 버튼 | ✅ 구현됨 | PUT `/api/jobs/applications/{id}` | ✅ 매핑 완료 |

**프론트엔드 완성도**: **약 95%**

### 2.3 매핑 문제점

**없음** - 일자리 흐름의 매핑이 완전하게 구현되어 있음

---

## 3. 정부 지원 흐름 (FEAT-3)

### 3.1 백엔드 API 구현 현황

| 기능 | API 엔드포인트 | 구현 여부 | 비고 |
|------|-----------------|-----------|------|
| 지원 프로그램 목록 | GET `/api/supports` | ✅ 구현됨 | 카테고리, 키워드 필터 |
| 지원 프로그램 상세 | GET `/api/supports/{id}` | ✅ 구현됨 | 자격 조건 포함 |
| 지원 프로그램 생성 | POST `/api/supports` | ✅ 구현됨 | 관리자 전용 |
| 지원 프로그램 수정 | PUT `/api/supports/{id}` | ✅ 구현됨 | 관리자 전용 |
| 지원 프로그램 삭제 | DELETE `/api/supports/{id}` | ✅ 구현됨 | 관리자 전용 |

**백엔드 API 완성도**: **약 90%**

### 3.2 프론트엔드 구현 현황

| 페이지 | 경로 | 구현 여부 | 백엔드 API 연동 | 비고 |
|------|------|-----------|-------------|------|
| 지원 프로그램 목록 | `/supports` | ✅ 구현됨 | GET `/api/supports` | 샘플 데이터 데모 포함 |
| 지원 프로그램 상세 | `/supports/[id]` | ✅ 구현됨 | GET `/api/supports/{id}` | ✅ 매핑 완료 |
| 자격 확인 | `/supports/[id]/eligibility` | ✅ 구현됨 | 독립 페이지 | 백엔드 API 미연동 (프론트엔드 단독 로직) |
| 공식 신청 링크 | `/supports/[id]` | ✅ 구현됨 | 공식 사이트 외부 링크 | 백엔드 API 사용 안 함 |

**프론트엔드 완성도**: **약 90%**

### 3.3 매핑 문제점

1. **자격 확인 기능**
   - **문제**: 프론트엔드 단독 로직으로 구현되어 있음 (백엔드 API 미호출)
   - **이유**: 사용자에게 자격 확인 UX 제공이 중요하지만 실제 신청은 백엔드를 통해 수행
   - **개선 가능**: 백엔드에 자격 확인 API 추가 권장 (실제 자격 확인 로직 이관)

---

## 4. 사용자 인증 흐름

### 4.1 백엔드 API 구현 현황

| 기능 | API 엔드포인트 | 구현 여부 | 비고 |
|------|-----------------|-----------|------|
| 회원가입 | POST `/api/auth/signup` | ✅ 구현됨 | |
| 이메일 중복 확인 | GET `/api/auth/check-email` | ✅ 구현됨 | |
| 로그인 | POST `/api/auth/login` | ✅ 구현됨 | JWT 토큰 발급 |
| 사용자 프로필 조회 | GET `/api/users/me` | ✅ 구현됨 | |
| 사용자 프로필 수정 | PUT `/api/users/me` | ✅ 구현됨 | |

**백엔드 API 완성도**: **100%**

### 4.2 프론트엔드 구현 현황

| 페이지 | 경로 | 구현 여부 | 백엔드 API 연동 | 비고 |
|------|------|-----------|-------------|------|
| 회원가입 | `/signup` | ✅ 구현됨 | POST `/api/auth/signup` | |
| 로그인 | `/login` | ✅ 구현됨 | POST `/api/auth/login` | |
| 프로필 설정 | `/profile` | ✅ 구현됨 | GET/PUT `/api/users/me` | |

**프론트엔드 완성도**: **100%**

---

## 5. 전체 통계

| 흐름 | 백엔드 API | 프론트엔드 | 전체 완성도 |
|------|----------|-----------|-------------|
| 법률 상담 (외국인) | ~95% | ~85% | **~90%** |
| 법률 상담 (전문가) | ~95% | ~70% | **~82%** |
| 일자리 찾기 (외국인) | ~90% | ~95% | **~92%** |
| 일자리 찾기 (관리자) | ~90% | ~95% | **~92%** |
| 정부 지원 정보 (외국인) | ~90% | ~90% | **~90%** |

**전체 평균 완성도**: **약 90%**

---

## 주요 문제점 및 제안사항

### 문제점 1: 백엔드 API vs 프론트엔드 구현 불일치

1. **상담 상세 조회**
   - **현재**: 프론트엔드에서 전체 목록 조회 후 클라이언트 사이드 필터링
   - **백엔드**: `/api/consultations` (상태 필터만 지원)
   - **제안**: 개별 조회 엔드포인트 `GET /api/consultations/{id}` 추가 권장

2. **결제 상태 업데이트**
   - **현재**: 토스 콜백 후 상담 상태 업데이트 로직 누락
   - **제안**: 토스 콜백 핸들러에서 결제 완료 후 상담 상태 업데이트 구현

3. **자격 확인**
   - **현재**: 프론트엔드 단독 로직으로 구현
   - **제안**: 백엔드 API와 프론트엔드 일관된 자격 확인 절차 구현

### 문제점 2: 데이터 효율성

1. **전체 상담 목록 조회**
   - **문제**: 전체 목록을 매번 조회 (페이지네이션 미지원)
   - **영향**: 대용량 시 성능 저하 가능성
   - **제안**: 캐싱 또는 페이지네이션 고려

### 문제점 3: UI/UX 일관성

1. **샘플 데이터 데모 모드**
   - **현황**: 일자리, 정부 지원 페이지에 데모 토글 존재
   - **목적**: 백엔드 API 연결 없이 UI 개발/테스트용
   - **문제점**: 프로덕션에서 데모 데이터 사용 혼란 가능성
   - **제안**: 개발 환경 변수로 제어, 프로덕션에서 제거

---

## 우선순위 개선 제안

### 높음 우선순위 (P0)

1. **상담 상세 조회 API 추가**
   - `GET /api/consultations/{id}` 엔드포인트 구현
   - 이유: 개별 조회로 데이터 효율성 향상, 전체 목록 대용량 조회 방지
   - 우선순위: P0

2. **결제 콜백 핸들러 구현**
   - 토스 콜백 후 상담 상태 업데이트 로직 구현
   - 이유: 상담 상태 정확성 보장
   - 우선순위: P0

### 중간 우선순위 (P1)

3. **백엔드 자격 확인 API**
   - 실제 자격 확인 로직 구현
   - 프론트엔드와 일관된 자격 확인 절차 구축
   - 이유: 데이터 정확성 향상, 백엔드/프론트엔드 일관성
   - 우선순위: P1

4. **페이지네이션 구현**
   - 일자리, 정부 지원 목록에 페이지네이션 추가
   - 대용량 데이터 조회 성능 향상
   - 우선순위: P1

### 낮은 우선순위 (P2)

5. **샘플 데이터 제거**
   - 데모 모드 환경 변수로 제어
   - 프로덕션 배포 시 데모 모드 비활성화
   - 우선순위: P2

6. **관심 공고 저장 (찜하기)**
   - 북마크/즐겨찾기 기능 구현
   - 사용자 경험 향상
   - 우선순위: P2

7. **지원 내역 페이지**
   - 사용자 지원 내역 조회 페이지 구현
   - 지원 상태 추적 UI
   - 우선순위: P2

---

## 결론

### 전체 구현 상황

**백엔드 API**: 약 **92%** 구현됨
- 법률 상담: ~95%
- 일자리 관리: ~90%
- 정부 지원: ~90%
- 인증: 100%

**프론트엔드**: 약 **90%** 구현됨
- 법률 상담: ~85%
- 일자리 찾기: ~92%
- 정부 지원: ~90%

**전체 평균**: 약 **90%** 완성됨

### 다음 단계

현재 시스템은 UserFlow에 정의된 대부분 핵심 흐름이 구현되어 있어 MVP로 운영 가능한 상태입니다. 

**즉시 개선 가능**:
1. 상담 상세 조회 API 추가 (P0)
2. 결제 상태 업데이트 로직 (P0)
3. 백엔드 자격 확인 API 구현 (P1)

**추가 개발 시나리오**:
1. 페이지네이션 구현 (P1)
2. 관심 공고 저장 (P2)
3. 지원 내역 페이지 (P2)
4. 샘플 데이터 제거 (P2)

---

**작성일**: 2026-01-03  
**버전**: 1.0.0




